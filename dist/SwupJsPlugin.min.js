(function e(t,r){if(typeof exports==="object"&&typeof module==="object")module.exports=r();else if(typeof define==="function"&&define.amd)define([],r);else if(typeof exports==="object")exports["SwupJsPlugin"]=r();else t["SwupJsPlugin"]=r()})(window,function(){return function(e){var t={};function r(n){if(t[n]){return t[n].exports}var o=t[n]={i:n,l:false,exports:{}};e[n].call(o.exports,o,o.exports,r);o.l=true;return o.exports}r.m=e;r.c=t;r.d=function(e,t,n){if(!r.o(e,t)){Object.defineProperty(e,t,{enumerable:true,get:n})}};r.r=function(e){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(e,"__esModule",{value:true})};r.t=function(e,t){if(t&1)e=r(e);if(t&8)return e;if(t&4&&typeof e==="object"&&e&&e.__esModule)return e;var n=Object.create(null);r.r(n);Object.defineProperty(n,"default",{enumerable:true,value:e});if(t&2&&typeof e!="string")for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n};r.n=function(e){var t=e&&e.__esModule?function t(){return e["default"]}:function t(){return e};r.d(t,"a",t);return t};r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};r.p="";return r(r.s=0)}([function(e,t,r){"use strict";var n=r(1);var o=i(n);function i(e){return e&&e.__esModule?e:{default:e}}e.exports=o.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){e[n]=r[n]}}}return e};var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var i=r(2);var a=s(i);var u=r(3);var f=s(u);function s(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function l(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function p(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var v=function(e){p(t,e);function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};c(this,t);var r=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));r.name="JsPlugin";r.currentAnimation=null;r.getAnimationPromises=function(e){var t=r.getAnimationIndex(e);return[r.createAnimationPromise(t,e)]};r.createAnimationPromise=function(e,t){var n=r.swup.transition;var o=r.options[e];return new Promise(function(e){o[t](e,{paramsFrom:o.regFrom.exec(n.from),paramsTo:o.regTo.exec(n.to),transition:n,from:o.from,to:o.to})})};r.getAnimationIndex=function(e){if(e==="in"){return r.currentAnimation}var t=r.options;var n=0;var o=0;Object.keys(t).forEach(function(e,i){var a=t[e];var u=r.rateAnimation(a);if(u>=o){n=i;o=u}});r.currentAnimation=n;return r.currentAnimation};r.rateAnimation=function(e){var t=r.swup.transition;var n=0;var o=e.regFrom.test(t.from);var i=e.regTo.test(t.to);n+=o?1:0;n+=i?1:0;n+=o&&e.to===t.custom?2:0;return n};var o=[{from:"(.*)",to:"(.*)",out:function e(t){return t()},in:function e(t){return t()}}];r.options=n({},o,e);r.generateRegex();return r}o(t,[{key:"mount",value:function e(){var t=this.swup;t._getAnimationPromises=t.getAnimationPromises;t.getAnimationPromises=this.getAnimationPromises}},{key:"unmount",value:function e(){var t=this.swup;t.getAnimationPromises=t._getAnimationPromises;t._getAnimationPromises=null}},{key:"generateRegex",value:function e(){var t=this;var r=function e(t){return t instanceof RegExp};this.options=Object.keys(this.options).map(function(e){return n({},t.options[e],{regFrom:r(t.options[e].from)?t.options[e].from:(0,f.default)(t.options[e].from),regTo:r(t.options[e].to)?t.options[e].to:(0,f.default)(t.options[e].to)})})}}]);return t}(a.default);t.default=v},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var i=function(){function e(){o(this,e);this.isSwupPlugin=true}n(e,[{key:"mount",value:function e(){}},{key:"unmount",value:function e(){}},{key:"_beforeMount",value:function e(){}},{key:"_afterUnmount",value:function e(){}}]);return e}();t.default=i},function(e,t){e.exports=g;e.exports.match=a;e.exports.regexpToFunction=u;e.exports.parse=o;e.exports.compile=i;e.exports.tokensToFunction=f;e.exports.tokensToRegExp=d;var r="/";var n=new RegExp(["(\\\\.)","(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?"].join("|"),"g");function o(e,t){var o=[];var i=0;var a=0;var u="";var f=t&&t.delimiter||r;var l=t&&t.whitelist||undefined;var p=false;var v;while((v=n.exec(e))!==null){var m=v[0];var d=v[1];var g=v.index;u+=e.slice(a,g);a=g+m.length;if(d){u+=d[1];p=true;continue}var y="";var h=v[2];var b=v[3];var x=v[4];var w=v[5];if(!p&&u.length){var P=u.length-1;var j=u[P];var _=l?l.indexOf(j)>-1:true;if(_){y=j;u=u.slice(0,P)}}if(u){o.push(u);u="";p=false}var O=w==="+"||w==="*";var A=w==="?"||w==="*";var E=b||x;var T=y||f;o.push({name:h||i++,prefix:y,delimiter:T,optional:A,repeat:O,pattern:E?c(E):"[^"+s(T===f?T:T+f)+"]+?"})}if(u||a<e.length){o.push(u+e.substr(a))}return o}function i(e,t){return f(o(e,t),t)}function a(e,t){var r=[];var n=g(e,r,t);return u(n,r)}function u(e,t){return function(r,n){var o=e.exec(r);if(!o)return false;var i=o[0];var a=o.index;var u={};var f=n&&n.decode||decodeURIComponent;for(var s=1;s<o.length;s++){if(o[s]===undefined)continue;var c=t[s-1];if(c.repeat){u[c.name]=o[s].split(c.delimiter).map(function(e){return f(e,c)})}else{u[c.name]=f(o[s],c)}}return{path:i,index:a,params:u}}}function f(e,t){var r=new Array(e.length);for(var n=0;n<e.length;n++){if(typeof e[n]==="object"){r[n]=new RegExp("^(?:"+e[n].pattern+")$",l(t))}}return function(t,n){var o="";var i=n&&n.encode||encodeURIComponent;var a=n?n.validate!==false:true;for(var u=0;u<e.length;u++){var f=e[u];if(typeof f==="string"){o+=f;continue}var s=t?t[f.name]:undefined;var c;if(Array.isArray(s)){if(!f.repeat){throw new TypeError('Expected "'+f.name+'" to not repeat, but got array')}if(s.length===0){if(f.optional)continue;throw new TypeError('Expected "'+f.name+'" to not be empty')}for(var l=0;l<s.length;l++){c=i(s[l],f);if(a&&!r[u].test(c)){throw new TypeError('Expected all "'+f.name+'" to match "'+f.pattern+'"')}o+=(l===0?f.prefix:f.delimiter)+c}continue}if(typeof s==="string"||typeof s==="number"||typeof s==="boolean"){c=i(String(s),f);if(a&&!r[u].test(c)){throw new TypeError('Expected "'+f.name+'" to match "'+f.pattern+'", but got "'+c+'"')}o+=f.prefix+c;continue}if(f.optional)continue;throw new TypeError('Expected "'+f.name+'" to be '+(f.repeat?"an array":"a string"))}return o}}function s(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function c(e){return e.replace(/([=!:$/()])/g,"\\$1")}function l(e){return e&&e.sensitive?"":"i"}function p(e,t){if(!t)return e;var r=e.source.match(/\((?!\?)/g);if(r){for(var n=0;n<r.length;n++){t.push({name:n,prefix:null,delimiter:null,optional:false,repeat:false,pattern:null})}}return e}function v(e,t,r){var n=[];for(var o=0;o<e.length;o++){n.push(g(e[o],t,r).source)}return new RegExp("(?:"+n.join("|")+")",l(r))}function m(e,t,r){return d(o(e,r),t,r)}function d(e,t,n){n=n||{};var o=n.strict;var i=n.start!==false;var a=n.end!==false;var u=n.delimiter||r;var f=[].concat(n.endsWith||[]).map(s).concat("$").join("|");var c=i?"^":"";for(var p=0;p<e.length;p++){var v=e[p];if(typeof v==="string"){c+=s(v)}else{var m=v.repeat?"(?:"+v.pattern+")(?:"+s(v.delimiter)+"(?:"+v.pattern+"))*":v.pattern;if(t)t.push(v);if(v.optional){if(!v.prefix){c+="("+m+")?"}else{c+="(?:"+s(v.prefix)+"("+m+"))?"}}else{c+=s(v.prefix)+"("+m+")"}}}if(a){if(!o)c+="(?:"+s(u)+")?";c+=f==="$"?"$":"(?="+f+")"}else{var d=e[e.length-1];var g=typeof d==="string"?d[d.length-1]===u:d===undefined;if(!o)c+="(?:"+s(u)+"(?="+f+"))?";if(!g)c+="(?="+s(u)+"|"+f+")"}return new RegExp(c,l(n))}function g(e,t,r){if(e instanceof RegExp){return p(e,t)}if(Array.isArray(e)){return v(e,t,r)}return m(e,t,r)}}])});